<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rifa a Beneficio: Una Misi√≥n de Amor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .title-font {
            font-family: 'Playfair Display', serif;
        }
        /* ---- Estilos de los N√∫meros ---- */
        .number-item {
            transition: all 0.2s ease-in-out;
        }
        .number-selected {
            background-color: #3b82f6 !important; /* Azul Intenso */
            color: white !important;
            transform: scale(1.15);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.5);
        }
        .number-taken {
            background-color: #ef4444 !important; /* Rojo Intenso */
            color: #fca5a5 !important;
            cursor: not-allowed;
            text-decoration: line-through;
            opacity: 0.6;
        }
        /* ---- Animaciones ---- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.7s ease-out forwards;
        }
        /* Animaci√≥n para el bot√≥n de inspiraci√≥n */
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(236, 72, 153, 0.7);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 0 12px rgba(236, 72, 153, 0);
            }
        }
        .animate-pulse-custom {
            animation: pulse 2.5s infinite;
        }
        /* Para asegurar que los elementos animados empiecen ocultos */
        .fade-in-on-load {
            opacity: 0;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        
        <header class="text-center mb-8 p-6 bg-white rounded-xl shadow-lg fade-in-on-load">
            <h1 class="title-font text-4xl md:text-5xl text-pink-500">Rifa a Beneficio</h1>
            <h2 class="text-2xl md:text-3xl text-gray-700 mt-2">"Una Misi√≥n de Amor üíñ"</h2>
            <p class="mt-4 text-gray-600 text-lg">Tu apoyo es fundamental para que Esmeralda y su t√≠a puedan viajar a Venezuela. ¬°Cada n√∫mero es una esperanza!</p>
        </header>

        <div class="grid md:grid-cols-2 gap-8 mb-8">
            <!-- Columna del Premio -->
            <div class="bg-white rounded-xl shadow-lg p-6 fade-in-on-load" style="animation-delay: 150ms;">
                <h3 class="font-bold text-2xl text-pink-500 mb-3">El Premio üéÅ</h3>
                <!-- IMAGEN REAL DEL ESPEJO -->
                <!-- Aseg√∫rate de que el archivo 'espejo-rifa.jpg' est√© en la misma carpeta que este archivo HTML -->
                <img src="espejo-rifa.jpg" alt="[Imagen de un espejo LED de cuerpo completo con estantes adyacentes, iluminado con luz c√°lida en un ambiente hogare√±o.]" class="rounded-lg mb-4 w-full h-auto object-cover aspect-video">
                <p class="font-semibold text-lg">Espejo LED TOUCH de 160x50 cm</p>
                <ul class="list-disc list-inside mt-2 text-gray-600 space-y-1">
                    <li>3 tonos de luz: fr√≠a, c√°lida y neutra.</li>
                    <li>Control t√°ctil inteligente para encendido y ajuste.</li>
                    <li>Vers√°til: puede usarse de pie o montado en la pared.</li>
                    <li>Dise√±o moderno que embellece cualquier espacio.</li>
                </ul>
            </div>
            <!-- Columna de Detalles de la Rifa -->
            <div class="bg-white rounded-xl shadow-lg p-6 flex flex-col justify-center fade-in-on-load" style="animation-delay: 300ms;">
                 <h3 class="font-bold text-2xl text-pink-500 mb-3">Detalles de la Rifa</h3>
                 <p class="text-4xl font-bold text-gray-800 mb-4">$1.000 <span class="text-lg font-normal">CLP por n√∫mero</span></p>
                 <p class="text-lg text-gray-600 mb-4">¬°Son 100 n√∫meros para ganar! Elige tus favoritos o deja que la suerte te sorprenda.</p>
                 <div class="bg-pink-100 border-l-4 border-pink-500 text-pink-700 p-4 rounded-md" role="alert">
                    <p class="font-bold">¬øC√≥mo participar?</p>
                    <ol class="list-decimal list-inside ml-4">
                        <li>Selecciona los n√∫meros que desees.</li>
                        <li>Usa el bot√≥n ‚ú® para una selecci√≥n al azar.</li>
                        <li>Confirma tu compra por WhatsApp.</li>
                    </ol>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-8 fade-in-on-load" style="animation-delay: 450ms;">
            <h3 class="font-bold text-2xl text-center text-pink-500 mb-4">Selecciona tus N√∫meros de la Suerte</h3>
            
            <!-- Bot√≥n de selecci√≥n aleatoria (antes Gemini) -->
            <div class="text-center mb-6">
                <button id="random-button" class="bg-pink-500 text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-pink-600 transform hover:scale-105 transition-all duration-300 ease-in-out disabled:bg-gray-400 disabled:cursor-wait animate-pulse-custom">
                    ‚ú® ¬°Insp√≠rame con n√∫meros de la suerte! ‚ú®
                </button>
                <p id="random-status" class="text-sm text-gray-500 mt-2 h-4"></p>
            </div>

            <div class="flex justify-center flex-wrap gap-4 mb-6 text-sm">
                <div class="flex items-center"><span class="w-4 h-4 rounded-full bg-pink-100 mr-2 border border-pink-300"></span>Disponibles</div>
                <div class="flex items-center"><span class="w-4 h-4 rounded-full bg-blue-500 mr-2"></span>Seleccionados</div>
                <div class="flex items-center"><span class="w-4 h-4 rounded-full bg-red-500 mr-2"></span>Vendidos</div>
            </div>

            <div id="raffle-numbers" class="grid grid-cols-5 sm:grid-cols-10 gap-2 md:gap-3">
                <!-- Los n√∫meros se generar√°n aqu√≠ con JavaScript -->
            </div>
        </div>

        <div id="action-button-container" class="text-center sticky bottom-4 z-10">
            <button id="whatsapp-button" class="bg-green-500 text-white font-bold py-4 px-8 rounded-full shadow-2xl hover:bg-green-600 transform hover:scale-105 transition-all duration-300 ease-in-out disabled:bg-gray-400 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-none" disabled>
                Selecciona al menos un n√∫mero
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- CONFIGURACI√ìN INICIAL ---
            const numbersContainer = document.getElementById('raffle-numbers');
            const whatsappButton = document.getElementById('whatsapp-button');
            const randomButton = document.getElementById('random-button');
            const randomStatus = document.getElementById('random-status');
            
            // Reemplaza este n√∫mero con el WhatsApp de la persona que recibe los pagos
            const phoneNumber = '56986917470'; 
            let selectedNumbers = [];
            const allNumbers = Array.from({ length: 100 }, (_, i) => i + 1);
            
            // ===================================================================
            // ¬°IMPORTANTE! EDITA AQU√ç LOS N√öMEROS QUE YA SE VENDIERON
            // Simplemente agrega los n√∫meros vendidos dentro de los corchetes, separados por comas.
            // ===================================================================
            const takenNumbers = [7, 15, 22, 48, 73, 99, 1, 10, 25, 50, 88]; 

            // --- FUNCIONES PRINCIPALES ---

            // Funci√≥n para generar la cuadr√≠cula de n√∫meros
            function createNumberGrid() {
                numbersContainer.innerHTML = '';
                for (let i = 1; i <= 100; i++) {
                    const numberEl = document.createElement('div');
                    numberEl.textContent = i;
                    numberEl.dataset.number = i;
                    
                    let baseClasses = 'number-item flex items-center justify-center h-12 md:h-14 rounded-lg font-bold text-lg transition-all duration-200';
                    
                    if (takenNumbers.includes(i)) {
                        numberEl.className = `${baseClasses} number-taken`;
                    } else {
                        numberEl.className = `${baseClasses} bg-pink-100 text-pink-800 cursor-pointer hover:bg-pink-200 hover:scale-105`;
                        numberEl.addEventListener('click', handleNumberClick);
                    }
                     if (selectedNumbers.includes(i)) {
                        numberEl.classList.add('number-selected');
                    }
                    
                    numbersContainer.appendChild(numberEl);
                }
            }

            // Maneja el clic en un n√∫mero
            function handleNumberClick(event) {
                const numberDiv = event.target;
                const number = parseInt(numberDiv.dataset.number, 10);
                if (numberDiv.classList.contains('number-taken')) return;

                toggleNumberSelection(number, numberDiv);
            }

            // Alterna la selecci√≥n de un n√∫mero (selecciona/deselecciona)
            function toggleNumberSelection(number, numberDivElement = null) {
                const numberDiv = numberDivElement || document.querySelector(`[data-number='${number}']`);
                if (!numberDiv || numberDiv.classList.contains('number-taken')) return;

                const index = selectedNumbers.indexOf(number);
                
                if (index > -1) {
                    selectedNumbers.splice(index, 1);
                    numberDiv.classList.remove('number-selected');
                } else {
                    selectedNumbers.push(number);
                    numberDiv.classList.add('number-selected');
                }
                updateWhatsappButton();
            }

            // Actualiza el estado y texto del bot√≥n de WhatsApp
            function updateWhatsappButton() {
                if (selectedNumbers.length > 0) {
                    whatsappButton.disabled = false;
                    const pluralS = selectedNumbers.length > 1 ? 's' : '';
                    const pluralN = selectedNumbers.length > 1 ? 's' : '';
                    whatsappButton.textContent = `¬°Quiero mi${pluralS} ${selectedNumbers.length} n√∫mero${pluralN}!`;
                } else {
                    whatsappButton.disabled = true;
                    whatsappButton.textContent = 'Selecciona al menos un n√∫mero';
                }
            }
            
            // --- NUEVA FUNCIONALIDAD DEL BOT√ìN DE INSPIRACI√ìN (SELECCI√ìN ALEATORIA) ---
            randomButton.addEventListener('click', () => {
                randomButton.disabled = true;
                randomStatus.textContent = 'Buscando inspiraci√≥n... ‚ú®';

                // Primero, deseleccionamos cualquier n√∫mero que el usuario ya tuviera
                selectedNumbers.forEach(num => {
                    const numberDiv = document.querySelector(`[data-number='${num}']`);
                    if (numberDiv) numberDiv.classList.remove('number-selected');
                });
                selectedNumbers = [];

                // Obtenemos solo los n√∫meros que est√°n realmente disponibles
                const availableNumbers = allNumbers.filter(n => !takenNumbers.includes(n));
                
                if (availableNumbers.length < 3) {
                    randomStatus.textContent = 'Quedan muy pocos n√∫meros para elegir.';
                    randomButton.disabled = false;
                    return;
                }

                // Algoritmo de Fisher-Yates para mezclar aleatoriamente los n√∫meros disponibles
                for (let i = availableNumbers.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [availableNumbers[i], availableNumbers[j]] = [availableNumbers[j], availableNumbers[i]];
                }

                // Seleccionamos los primeros 3 n√∫meros de la lista ya mezclada
                const suggestedNumbers = availableNumbers.slice(0, 3);
                
                // Aplicamos la selecci√≥n visualmente
                suggestedNumbers.forEach(num => {
                    toggleNumberSelection(num);
                });
                
                randomStatus.textContent = '¬°Estos n√∫meros tienen buena energ√≠a!';
                
                // Reactivamos el bot√≥n y limpiamos el mensaje despu√©s de unos segundos
                setTimeout(() => {
                    randomButton.disabled = false;
                    randomStatus.textContent = '';
                }, 3000);
            });


            // --- EVENTO DEL BOT√ìN DE WHATSAPP ---
            whatsappButton.addEventListener('click', function() {
                if (selectedNumbers.length === 0) return;
                selectedNumbers.sort((a, b) => a - b);
                const numbersText = selectedNumbers.join(', ');
                const message = `¬°Hola! Quiero participar en la rifa "Una Misi√≥n de Amor". Por favor, res√©rvame estos n√∫meros: *${numbersText}*. ¬øMe podr√≠as indicar los medios de pago, por favor? ¬°Muchas gracias!`;
                const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            });
            
            // --- INICIALIZACI√ìN DE LA P√ÅGINA ---
            // Aplica las animaciones de entrada
            const fadeElements = document.querySelectorAll('.fade-in-on-load');
            fadeElements.forEach((el, index) => {
                el.style.animationDelay = `${index * 150}ms`;
                el.classList.add('fade-in');
            });

            // Crea la grilla de n√∫meros al cargar la p√°gina
            createNumberGrid();
        });
    </script>
</body>
</html>
